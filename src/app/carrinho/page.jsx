'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\n\nexport default function Carrinho() {\n  const [carrinho, setCarrinho] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [mensagem, setMensagem] = useState('');\n  const router = useRouter();\n\n  useEffect(() => {\n    // Carregar carrinho do localStorage\n    const carrinhoSalvo = localStorage.getItem('carrinho');\n    if (carrinhoSalvo) {\n      setCarrinho(JSON.parse(carrinhoSalvo));\n    }\n    setLoading(false);\n  }, []);\n\n  const atualizarQuantidade = (produtoId, novaQuantidade) => {\n    if (novaQuantidade <= 0) {\n      removerItem(produtoId);\n      return;\n    }\n\n    const novoCarrinho = carrinho.map(item => \n      item.id === produtoId \n        ? { ...item, quantidade: novaQuantidade, subtotal: item.preco * novaQuantidade }\n        : item\n    );\n    \n    setCarrinho(novoCarrinho);\n    localStorage.setItem('carrinho', JSON.stringify(novoCarrinho));\n  };\n\n  const removerItem = (produtoId) => {\n    const novoCarrinho = carrinho.filter(item => item.id !== produtoId);\n    setCarrinho(novoCarrinho);\n    localStorage.setItem('carrinho', JSON.stringify(novoCarrinho));\n    setMensagem('Item removido do carrinho');\n    setTimeout(() => setMensagem(''), 3000);\n  };\n\n  const limparCarrinho = () => {\n    setCarrinho([]);\n    localStorage.removeItem('carrinho');\n    setMensagem('Carrinho limpo');\n    setTimeout(() => setMensagem(''), 3000);\n  };\n\n  const calcularTotal = () => {\n    return carrinho.reduce((total, item) => total + item.subtotal, 0);\n  };\n\n  const finalizarCompra = () => {\n    if (carrinho.length === 0) {\n      setMensagem('Carrinho vazio');\n      return;\n    }\n    \n    // Redirecionar para checkout\n    router.push('/checkout');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-xl\">Carregando carrinho...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <nav className=\"bg-white border-b py-4\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2 text-sm\">\n              <Link href=\"/\" className=\"text-blue-600 hover:text-blue-800\">\n                Início\n              </Link>\n              <span>›</span>\n              <Link href=\"/produtos\" className=\"text-blue-600 hover:text-blue-800\">\n                Produtos\n              </Link>\n              <span>›</span>\n              <span className=\"text-gray-500\">Carrinho</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <Link\n                href=\"/perfil\"\n                className=\"text-blue-600 hover:text-blue-800 font-medium\"\n              >\n                Meu Perfil\n              </Link>\n              <Link\n                href=\"/admin\"\n                className=\"text-blue-600 hover:text-blue-800 font-medium\"\n              >\n                Admin\n              </Link>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n          {/* Título */}\n          <div className=\"bg-blue-600 text-white p-6\">\n            <h1 className=\"text-2xl font-bold\">Meu Carrinho</h1>\n            <p className=\"text-blue-100\">\n              {carrinho.length} {carrinho.length === 1 ? 'item' : 'itens'} no carrinho\n            </p>\n          </div>\n\n          {/* Mensagem */}\n          {mensagem && (\n            <div className=\"bg-green-50 border-l-4 border-green-400 p-4\">\n              <p className=\"text-green-700\">{mensagem}</p>\n            </div>\n          )}\n\n          {carrinho.length === 0 ? (\n            /* Carrinho Vazio */\n            <div className=\"p-8 text-center\">\n              <div className=\"mb-6\">\n                <svg className=\"mx-auto h-24 w-24 text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zM8 6V4a2 2 0 114 0v2H8zm1 5a1 1 0 112 0v1a1 1 0 11-2 0v-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                Seu carrinho está vazio\n              </h3>\n              <p className=\"text-gray-500 mb-6\">\n                Adicione alguns produtos incríveis à sua coleção!\n              </p>\n              <Link\n                href=\"/produtos\"\n                className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold transition\"\n              >\n                Explorar Produtos\n              </Link>\n            </div>\n          ) : (\n            /* Lista de Itens */\n            <div className=\"p-6\">\n              <div className=\"space-y-4\">\n                {carrinho.map((item) => (\n                  <div key={item.id} className=\"flex items-center space-x-4 border-b pb-4\">\n                    {/* Imagem */}\n                    <div className=\"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0\">\n                      {item.imagemUrl ? (\n                        <Image\n                          src={item.imagemUrl}\n                          alt={item.nome}\n                          width={80}\n                          height={80}\n                          className=\"w-full h-full object-cover\"\n                          onError={(e) => {\n                            e.target.src = '/images/placeholder.jpg';\n                          }}\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                          <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Detalhes */}\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">\n                        <Link\n                          href={`/produtos/${item.id}`}\n                          className=\"hover:text-blue-600\"\n                        >\n                          {item.nome}\n                        </Link>\n                      </h3>\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n                        <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded\">\n                          {item.liga?.sigla}\n                        </span>\n                        {item.time && (\n                          <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded\">\n                            {item.time.nome}\n                          </span>\n                        )}\n                        <span>Cor: {item.cor?.nome}</span>\n                        <span>Tamanho: {item.tamanho?.nome}</span>\n                      </div>\n                    </div>\n\n                    {/* Quantidade */}\n                    <div className=\"flex items-center border rounded\">\n                      <button\n                        type=\"button\"\n                        className=\"px-3 py-1 hover:bg-gray-100\"\n                        onClick={() => atualizarQuantidade(item.id, item.quantidade - 1)}\n                      >\n                        -\n                      </button>\n                      <span className=\"px-4 py-1 min-w-[60px] text-center\">\n                        {item.quantidade}\n                      </span>\n                      <button\n                        type=\"button\"\n                        className=\"px-3 py-1 hover:bg-gray-100\"\n                        onClick={() => atualizarQuantidade(item.id, item.quantidade + 1)}\n                      >\n                        +\n                      </button>\n                    </div>\n\n                    {/* Preço */}\n                    <div className=\"text-right\">\n                      <div className=\"text-lg font-semibold text-gray-900\">\n                        R$ {item.subtotal.toFixed(2)}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        R$ {item.preco.toFixed(2)} cada\n                      </div>\n                    </div>\n\n                    {/* Remover */}\n                    <button\n                      onClick={() => removerItem(item.id)}\n                      className=\"text-red-600 hover:text-red-800 p-2\"\n                      title=\"Remover item\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 000 2h2a1 1 0 100-2H9zM4 5a2 2 0 012-2h8a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 112 0v3a1 1 0 11-2 0V9zm4 0a1 1 0 112 0v3a1 1 0 11-2 0V9z\" clipRule=\"evenodd\" />\n                      </svg>\n                    </button>\n                  </div>\n                ))}\n              </div>\n\n              {/* Resumo */}\n              <div className=\"mt-8 border-t pt-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"text-lg font-semibold text-gray-900\">\n                    Total: R$ {calcularTotal().toFixed(2)}\n                  </div>\n                  <button\n                    onClick={limparCarrinho}\n                    className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                  >\n                    Limpar Carrinho\n                  </button>\n                </div>\n\n                <div className=\"flex space-x-4\">\n                  <Link\n                    href=\"/produtos\"\n                    className=\"flex-1 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg hover:bg-gray-300 font-semibold text-center transition\"\n                  >\n                    Continuar Comprando\n                  </Link>\n                  <button\n                    onClick={finalizarCompra}\n                    className=\"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 font-semibold transition\"\n                  >\n                    Finalizar Compra\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"